(function(){var e,t,n,r;e=document.getElementById("dropzone"),r=function(e){var t,n;return n=new FileReader,t=$.Deferred(),n.onload=function(e){t.resolve(e.target.result)},n.onerror=function(){t.reject(this)},/^image/.test(e.type)?n.readAsDataURL(e):n.readAsText(e),t.promise()},n=function(e){var t,n,a,o;e.stopPropagation(),e.preventDefault(),n=e.dataTransfer.files,o=[],a=[],_.each(n,function(e){o.push("<li><strong>",escape(e.name),"</strong> (",e.type||"n/a",") - ",e.size," bytes, last modified: ",e.lastModifiedDate.toLocaleDateString(),"</li>"),a.push(r(e))}),document.getElementById("list").innerHTML="<ul>"+o.join("")+"</ul>",t=void 0,$.when.apply($,a).then(function(){a=arguments,t=_.reduce(a,function(e,t){return e.push.apply(e,JSON.parse(t).event),e},[]),document.getElementById("list").innerHTML=JSON.stringify(t)})},t=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},e.addEventListener("dragover",t,!1),e.addEventListener("drop",n,!1)}).call(this);