(function(){angular.module("app",[]),angular.module("app").directive("eventList",function(){return{scope:{events:"="},link:function(e,n,t){return e.$watchCollection("events",function(e){return n.html(JSON.stringify(e))})}}})}).call(this),function(){angular.module("app").directive("dropzone",function(e){return{scope:{events:"="},link:function(n,t,r){var a,o,u,i;return n.$watchCollection("events",function(e){return(null!=e?e.length:void 0)?t.hide():t.show()}),a=t,i=function(n){var t,r;return r=new FileReader,t=e.defer(),r.onload=function(e){t.resolve(e.target.result)},r.onerror=function(){t.reject(this)},/^image/.test(n.type)?r.readAsDataURL(n):r.readAsText(n),t.promise},u=function(t){var r,a,o,u;return t.stopPropagation(),t.preventDefault(),o=t.originalEvent.dataTransfer.files,u=function(){var e,n,t;for(t=[],e=0,n=o.length;n>e;e++)a=o[e],t.push(i(a));return t}(),r=void 0,e.all(u).then(function(e){return r=_.reduce(e,function(e,n){return e.push.apply(e,JSON.parse(n).event),e},[]),n.events=r})},o=function(e){return e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},a.on("dragover",o),a.on("drop",u)}}})}.call(this),function(){angular.module("app").directive("searchBox",function(){return{scope:{search:"=",searches:"="},templateUrl:"search",link:function(e,n,t){return e.searches=[],e.search="",n.find("#add").on("click",function(){return e.$apply(function(){return e.searches.push({term:e.term})})})}}}),angular.module("app").directive("searchList",function(){return{scope:{searches:"=",events:"="},templateUrl:"search-list",link:function(e,n,t){}}}),angular.module("app").directive("termViz",function(){return{scope:{search:"=",events:"="},template:"<svg></svg>",link:function(e,n,t){var r;return r=nv.models.discreteBarChart().x(function(e){return e.x}).y(function(e){return e.y}),e.$watchCollection("events",function(t){var a,o,u,i,c;if(t)return r.xRange([0,100]),i=new RegExp(e.search.term,"i"),u=_.filter(t,function(e){return-1!==e.query.query_text.search(i)}),console.log(e.search),console.log(u),c=function(){var e,n,t;for(t=[],e=0,n=u.length;n>e;e++)o=u[e],t.push(parseInt(o.query.id[0].timestamp_usec));return t}(),a=[{values:d3.layout.histogram()(c)}],r=nv.models.multiBarChart(),d3.select(n.find("svg")[0]).datum(a).call(r)})}}})}.call(this);