(function(){angular.module("app").directive("dropzone",function(e){return{scope:{events:"="},link:function(n,t,r){var o,a,i,u;return n.$watchCollection("events",function(e){return(null!=e?e.length:void 0)?t.hide():t.show()}),o=t,u=function(n){var t,r;return r=new FileReader,t=e.defer(),r.onload=function(e){t.resolve(e.target.result)},r.onerror=function(){t.reject(this)},/^image/.test(n.type)?r.readAsDataURL(n):r.readAsText(n),t.promise},i=function(t){var r,o,a,i;return t.stopPropagation(),t.preventDefault(),a=t.originalEvent.dataTransfer.files,i=function(){var e,n,t;for(t=[],e=0,n=a.length;n>e;e++)o=a[e],t.push(u(o));return t}(),r=void 0,e.all(i).then(function(e){return r=_.reduce(e,function(e,n){return e.push.apply(e,JSON.parse(n).event),e},[]),n.events=r})},a=function(e){return e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},o.on("dragover",a),o.on("drop",i)}}})}).call(this);