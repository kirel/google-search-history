(function(){angular.module("app").directive("searchBox",function(){return{scope:{search:"=",searches:"="},templateUrl:"search",link:function(e,r,t){return e.searches=[],e.search="",r.find("#add").on("click",function(){return e.$apply(function(){return e.searches.push({term:e.term})})})}}}),angular.module("app").directive("searchList",function(){return{scope:{searches:"=",events:"="},templateUrl:"search-list",link:function(e,r,t){}}}),angular.module("app").directive("termViz",function(){return{scope:{search:"=",events:"="},template:"<svg></svg>",link:function(e,r,t){var n;return n=nv.models.discreteBarChart().x(function(e){return e.x}).y(function(e){return e.y}),e.$watchCollection("events",function(t){var a,c,s,u,i;if(t)return n.xRange([0,100]),u=new RegExp(e.search.term,"i"),s=_.filter(t,function(e){return-1!==e.query.query_text.search(u)}),console.log(e.search),console.log(s),i=function(){var e,r,t;for(t=[],e=0,r=s.length;r>e;e++)c=s[e],t.push(parseInt(c.query.id[0].timestamp_usec));return t}(),a=[{values:d3.layout.histogram()(i)}],n=nv.models.multiBarChart(),d3.select(r.find("svg")[0]).datum(a).call(n)})}}})}).call(this);